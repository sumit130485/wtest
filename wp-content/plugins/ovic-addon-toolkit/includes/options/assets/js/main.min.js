!function(e,i,t,n){"use strict";var o=o||{};o.funcs={},o.vars={code_themes:[],onloaded:!1,$body:e("body"),$window:e(i),$document:e(t),$form_warning:null,is_confirm:!1,form_modified:!1,is_rtl:e("body").hasClass("rtl")},o.helper={uid:function(e){return(e||"")+Math.random().toString(36).substr(2,9)},preg_quote:function(e){return(e+"").replace(/(\[|\-|\])/g,"\\$1")},name_nested_replace:function(i,t){var n=new RegExp("("+o.helper.preg_quote(t)+")\\[(\\d+)\\]","g");i.find(":radio").each(function(){(this.checked||this.orginal_checked)&&(this.orginal_checked=!0)}),i.each(function(i){e(this).find(":input").each(function(){this.name=this.name.replace(n,t+"["+i+"]"),this.orginal_checked&&(this.checked=!0)})})},debounce:function(e,i,t){var n;return function(){var o=this,a=arguments,c=function(){n=null,t||e.apply(o,a)},r=t&&!n;clearTimeout(n),n=setTimeout(c,i),r&&e.apply(o,a)}}},e.fn.ovic_clone=function(){for(var i=e.fn.clone.apply(this,arguments),t=this.find("select").add(this.filter("select")),n=i.find("select").add(i.filter("select")),o=0;o<t.length;++o)for(var a=0;a<t[o].options.length;++a)t[o].options[a].selected===!0&&(n[o].options[a].selected=!0);return this.find(":radio").each(function(){this.orginal_checked=this.checked}),i},e.fn.ovic_expand_all=function(){return this.each(function(){e(this).on("click",function(i){i.preventDefault(),e(".ovic-wrapper").toggleClass("ovic-show-all"),e(".ovic-section").ovic_reload_script(),e(this).find(".fa").toggleClass("fa-indent").toggleClass("fa-outdent")})})},e.fn.ovic_nav_options=function(){return this.each(function(){var t,o=e(this),a=o.find("a"),c=o.closest(".ovic").find(".ovic-section-id");e(i).on("hashchange ovic.hashchange",function(){var o=i.location.hash.match(new RegExp("tab=([^&]*)")),r=o?o[1]:a.first().attr("href").replace("#tab=",""),d=e("#ovic-tab-link-"+r);if(d.length>0){d.closest(".ovic-tab-depth-0").addClass("ovic-tab-active").siblings().removeClass("ovic-tab-active"),a.removeClass("ovic-section-active"),d.addClass("ovic-section-active"),t!==n&&t.hide();var l=e("#ovic-section-"+r);l.show(),l.ovic_reload_script(),c.val(r),t=l}}).trigger("ovic.hashchange")})},e.fn.ovic_nav_metabox=function(){return this.each(function(){var i,t,o=e(this),a=o.find("a");a.on("click",function(o){o.preventDefault();var a=e(this),c=a.data("section");t!==n&&t.removeClass("ovic-section-active"),i!==n&&i.hide(),a.addClass("ovic-section-active");var r=e("#ovic-section-"+c);r.show(),r.ovic_reload_script(),i=r,t=a}),a.first().trigger("click")})},e.fn.ovic_page_templates=function(){this.length&&e(t).on("change",".editor-page-attributes__template select, #page_template",function(){var i=e(this).val()||"default";e(".ovic-page-templates").removeClass("ovic-show").addClass("ovic-hide"),e(".ovic-page-"+i.toLowerCase().replace(/[^a-zA-Z0-9]+/g,"-")).removeClass("ovic-hide").addClass("ovic-show")})},e.fn.ovic_post_formats=function(){this.length&&e(t).on("change",'.editor-post-format select, #formatdiv input[name="post_format"]',function(){var i=e(this).val()||"default";i="0"===i?"default":i,e(".ovic-post-formats").removeClass("ovic-show").addClass("ovic-hide"),e(".ovic-post-format-"+i).removeClass("ovic-hide").addClass("ovic-show")})},e.fn.ovic_search=function(){return this.each(function(){var i=e(this),t=i.find("input");t.on("change keyup",function(){var i=e(this).val(),t=e(".ovic-wrapper"),n=t.find(".ovic-section"),o=n.find("> .ovic-field:not(.hidden)"),a=o.find("> .ovic-title, .ovic-search-tags");i.length>3?(o.addClass("ovic-hidden"),t.addClass("ovic-search-all"),a.each(function(){var t=e(this);if(t.text().match(new RegExp(".*?"+i+".*?","i"))){var n=t.closest(".ovic-field");n.removeClass("ovic-hidden"),n.parent().ovic_reload_script()}})):(o.removeClass("ovic-hidden"),t.removeClass("ovic-search-all"))})})},e.fn.ovic_sticky=function(){return this.each(function(){var n=e(this),o=e(i),a=n.find(".ovic-header-inner"),c=parseInt(a.css("padding-left"))+parseInt(a.css("padding-right")),r=32,d=0,l=!1,s=function(){var e=n.offset().top,o=Math.max(r,e-d),l=Math.max(t.documentElement.clientWidth,i.innerWidth||0);r>=o&&l>782?(a.css({width:n.outerWidth()-c}),n.css({height:n.outerHeight()}).addClass("ovic-sticky")):(a.removeAttr("style"),n.removeAttr("style").removeClass("ovic-sticky"))},v=function(){l||requestAnimationFrame(function(){s(),l=!1}),l=!0},f=function(){d=o.scrollTop(),v()};o.on("scroll resize",f),f()})},e.fn.ovic_dependency=function(){return this.each(function(){var i=e(this),t=i.children("[data-controller]");if(t.length){var n=e.ovic_deps.createRuleset(),a=e.ovic_deps.createRuleset(),c=[],r=[];t.each(function(){var i=e(this),t=i.data("controller").split("|"),o=i.data("condition").split("|"),d=i.data("value").toString().split("|"),l=i.data("depend-global")?!0:!1,s=l?a:n;e.each(t,function(e,t){var n=d[e]||"",a=o[e]||o[0];s=s.createRule('[data-depend-id="'+t+'"]',a,n),s.include(i),l?r.push(t):c.push(t)})}),c.length&&e.ovic_deps.enable(i,n,c),r.length&&e.ovic_deps.enable(o.vars.$body,a,r)}})},e.fn.ovic_field_accordion=function(){return this.each(function(){var i=e(this).find(".ovic-accordion-title");i.on("click",function(){var i=e(this),t=i.find(".ovic-accordion-icon"),n=i.next();t.hasClass("fa-angle-right")?t.removeClass("fa-angle-right").addClass("fa-angle-down"):t.removeClass("fa-angle-down").addClass("fa-angle-right"),n.data("opened")||(n.ovic_reload_script(),n.data("opened",!0)),n.toggleClass("ovic-accordion-open")})})},e.fn.ovic_field_backup=function(){return this.each(function(){if(i.wp.customize!==n){var t=this,a=e(this),c=(e("body"),a.find(".ovic-import")),r=a.find(".ovic-reset");t.notificationOverlay=function(){wp.customize.notifications&&wp.customize.OverlayNotification&&(wp.customize.state("saved").get()||(wp.customize.state("changesetStatus").set("trash"),wp.customize.each(function(e){e._dirty=!1}),wp.customize.state("saved").set(!0)),wp.customize.notifications.add(new wp.customize.OverlayNotification("ovic_field_backup_notification",{type:"default",message:"&nbsp;",loading:!0})))},r.on("click",function(e){e.preventDefault(),o.vars.is_confirm&&(t.notificationOverlay(),i.wp.ajax.post("ovic-reset",{unique:r.data("unique"),nonce:r.data("nonce")}).done(function(e){i.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("ovic_field_backup_notification")}))}),c.on("click",function(e){e.preventDefault(),o.vars.is_confirm&&(t.notificationOverlay(),i.wp.ajax.post("ovic-import",{unique:c.data("unique"),nonce:c.data("nonce"),data:a.find(".ovic-import-data").val()}).done(function(e){i.location.reload(!0)}).fail(function(e){alert(e.error),wp.customize.notifications.remove("ovic_field_backup_notification")}))})}})},e.fn.ovic_field_background=function(){return this.each(function(){e(this).find(".ovic--background-image").ovic_reload_script()})},e.fn.ovic_field_code_editor=function(){return this.each(function(){if("function"==typeof CodeMirror){var i=e(this),t=i.find("textarea"),n=i.find(".CodeMirror"),a=t.data("editor");n.length&&n.remove();var c=setInterval(function(){if(i.is(":visible")){var n=CodeMirror.fromTextArea(t[0],a);if("default"!==a.theme&&-1===o.vars.code_themes.indexOf(a.theme)){var r=e("<link>");e("#ovic-codemirror-css").after(r),r.attr({rel:"stylesheet",id:"ovic-codemirror-"+a.theme+"-css",href:a.cdnURL+"/theme/"+a.theme+".min.css",type:"text/css",media:"all"}),o.vars.code_themes.push(a.theme)}CodeMirror.modeURL=a.cdnURL+"/mode/%N/%N.min.js",CodeMirror.autoLoadMode(n,a.mode),n.on("change",function(e,i){t.val(n.getValue()).trigger("change")}),clearInterval(c)}})}})},e.fn.ovic_field_date=function(){return this.each(function(){var i=e(this),t=i.find("input"),n=i.find(".ovic-date-settings").data("settings"),o={showAnim:"",beforeShow:function(i,t){e(t.dpDiv).addClass("ovic-datepicker-wrapper")},onClose:function(i,t){e(t.dpDiv).removeClass("ovic-datepicker-wrapper")}};n=e.extend({},n,o),2===t.length&&(n=e.extend({},n,{onSelect:function(i){var o=(e(this),t.first(),t.first().attr("id")===e(this).attr("id")?"minDate":"maxDate"),a=e.datepicker.parseDate(n.dateFormat,i);t.not(this).datepicker("option",o,a)}})),t.each(function(){var i=e(this);i.hasClass("hasDatepicker")&&i.removeAttr("id").removeClass("hasDatepicker"),i.datepicker(n)})})},e.fn.ovic_field_fieldset=function(){return this.each(function(){e(this).find(".ovic-fieldset-content").ovic_reload_script()})},e.fn.ovic_field_gallery=function(){return this.each(function(){var t,n=e(this),o=n.find(".ovic-edit-gallery"),a=n.find(".ovic-clear-gallery"),c=n.find("ul"),r=n.find("input");n.find("img");n.on("click",".ovic-button, .ovic-edit-gallery",function(n){var d=e(this),l=r.val(),s=d.hasClass("ovic-edit-gallery")?"edit":"add",v="add"!==s||l.length?"gallery-edit":"gallery";n.preventDefault(),"undefined"!=typeof i.wp&&i.wp.media&&i.wp.media.gallery&&("gallery"===v?(t=i.wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0}),t.open()):(t=i.wp.media.gallery.edit('[gallery ids="'+l+'"]'),"add"===s&&t.setState("gallery-library")),t.on("update",function(e){c.empty();var i=e.models.map(function(e){var i=e.toJSON(),t=i.sizes&&i.sizes.thumbnail&&i.sizes.thumbnail.url?i.sizes.thumbnail.url:i.url;return c.append('<li><img src="'+t+'"></li>'),i.id});r.val(i.join(",")).trigger("change"),a.removeClass("hidden"),o.removeClass("hidden")}))}),a.on("click",function(e){e.preventDefault(),c.empty(),r.val("").trigger("change"),a.addClass("hidden"),o.addClass("hidden")})})},e.fn.ovic_field_group=function(){return this.each(function(){var i=e(this),t=i.children(".ovic-fieldset"),n=t.length?t:i,a=n.children(".ovic-cloneable-wrapper"),c=n.children(".ovic-cloneable-hidden"),r=n.children(".ovic-cloneable-max"),d=n.children(".ovic-cloneable-min"),l=a.data("field-id"),s=Boolean(Number(a.data("title-number"))),v=parseInt(a.data("max")),f=parseInt(a.data("min"));a.hasClass("ui-accordion")&&a.find(".ui-accordion-header-icon").remove();var h=function(i){i.find(".ovic-cloneable-title-number").each(function(i){e(this).html(e(this).closest(".ovic-cloneable-item").index()+1+".")})};a.accordion({header:"> .ovic-cloneable-item > .ovic-cloneable-title",collapsible:!0,active:!1,animate:!1,heightStyle:"content",icons:{header:"ovic-cloneable-header-icon fas fa-angle-right",activeHeader:"ovic-cloneable-header-icon fas fa-angle-down"},activate:function(e,i){var t=i.newPanel,n=i.newHeader;if(t.length&&!t.data("opened")){var o=t.children(),a=o.first().find(":input").first(),c=n.find(".ovic-cloneable-value");a.on("change keyup",function(e){c.text(a.val())}),t.ovic_reload_script(),t.data("opened",!0),t.data("retry",!1)}else t.data("retry")&&(t.ovic_reload_script_retry(),t.data("retry",!1))}}),a.sortable({axis:"y",handle:".ovic-cloneable-title,.ovic-cloneable-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(e,i){a.accordion({active:!1}),a.sortable("refreshPositions"),i.item.children(".ovic-cloneable-content").data("retry",!0)},update:function(e,i){o.helper.name_nested_replace(a.children(".ovic-cloneable-item"),l),a.ovic_customizer_refresh(),s&&h(a)}}),n.children(".ovic-cloneable-add").on("click",function(e){e.preventDefault();var i=a.children(".ovic-cloneable-item").length;if(d.hide(),v&&i+1>v)return void r.show();var t=c.ovic_clone(!0);t.removeClass("ovic-cloneable-hidden"),t.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(l+"[0]",l+"["+i+"]")}),a.append(t),a.accordion("refresh"),a.accordion({active:i}),a.ovic_customizer_refresh(),a.ovic_customizer_listen({closest:!0}),s&&h(a)});var p=function(i){i.preventDefault();var t=a.children(".ovic-cloneable-item").length;if(d.hide(),v&&t+1>v)return void r.show();var n=e(this),c=n.parent().parent(),f=c.children(".ovic-cloneable-helper").ovic_clone(!0),p=c.children(".ovic-cloneable-title").ovic_clone(),u=c.children(".ovic-cloneable-content").ovic_clone(),g=e('<div class="ovic-cloneable-item" />');g.append(f),g.append(p),g.append(u),a.children().eq(c.index()).after(g),o.helper.name_nested_replace(a.children(".ovic-cloneable-item"),l),a.accordion("refresh"),a.ovic_customizer_refresh(),a.ovic_customizer_listen({closest:!0}),s&&h(a)};a.children(".ovic-cloneable-item").children(".ovic-cloneable-helper").on("click",".ovic-cloneable-clone",p),n.children(".ovic-cloneable-hidden").children(".ovic-cloneable-helper").on("click",".ovic-cloneable-clone",p);var u=function(i){i.preventDefault();var t=a.children(".ovic-cloneable-item").length;return r.hide(),d.hide(),f&&f>t-1?void d.show():(e(this).closest(".ovic-cloneable-item").remove(),o.helper.name_nested_replace(a.children(".ovic-cloneable-item"),l),a.ovic_customizer_refresh(),void(s&&h(a)))};a.children(".ovic-cloneable-item").children(".ovic-cloneable-helper").on("click",".ovic-cloneable-remove",u),n.children(".ovic-cloneable-hidden").children(".ovic-cloneable-helper").on("click",".ovic-cloneable-remove",u)})},e.fn.ovic_field_icon=function(){return this.each(function(){var t=e(this);t.on("click",".ovic-icon-add",function(n){n.preventDefault();var a=e(this),c=e("#ovic-modal-icon");c.show(),o.vars.$icon_target=t,o.vars.icon_modal_loaded||(c.find(".ovic-modal-loading").show(),i.wp.ajax.post("ovic-get-icons",{nonce:a.data("nonce")}).done(function(i){c.find(".ovic-modal-loading").hide(),o.vars.icon_modal_loaded=!0;var t=c.find(".ovic-modal-load").html(i.content),n=c.find(".ovic-nav > ul").html(i.nav);t.on("click","i",function(i){i.preventDefault();var t=e(this).attr("title");o.vars.$icon_target.find("i").removeAttr("class").addClass(t),o.vars.$icon_target.find("input").val(t).trigger("change"),o.vars.$icon_target.find(".ovic-icon-preview").removeClass("hidden"),o.vars.$icon_target.find(".ovic-icon-remove").removeClass("hidden"),c.hide()}),n.on("click","a",function(i){i.preventDefault();var n=e(this),o=n.closest("ul"),a=n.data("active"),r=o.find("a").not(n),d=n.find("span");d.hasClass("fa-folder")&&(n.addClass("ovic-section-active"),d.toggleClass("fa-folder-open fa-folder"),r.removeClass("ovic-section-active"),r.find("span").removeClass("fa-folder-open").addClass("fa-folder"),t.find(a).removeClass("hidden").siblings().addClass("hidden"),c.find(".ovic-icon-search").trigger("change"))}),c.on("change keyup",".ovic-icon-search",function(){var i=e(this).val(),o=n.find(".ovic-section-active").data("active"),a=t.find(o+" i");a.each(function(){var t=e(this);t.attr("title").search(new RegExp(i,"i"))<0?t.hide():t.show()})}),c.on("click",".ovic-modal-close, .ovic-modal-overlay",function(){c.hide()})}).fail(function(e){c.find(".ovic-modal-loading").hide(),c.find(".ovic-modal-load").html(e.error),c.on("click",function(){c.hide()})}))}),t.on("click",".ovic-icon-remove",function(i){i.preventDefault(),t.find(".ovic-icon-preview").addClass("hidden"),t.find("input").val("").trigger("change"),e(this).addClass("hidden")})})},e.fn.ovic_field_map=function(){return this.each(function(){if("undefined"!=typeof L){var i=e(this),t=i.find(".ovic--map-osm"),n=i.find(".ovic--map-search input"),o=i.find(".ovic--latitude"),a=i.find(".ovic--longitude"),c=i.find(".ovic--zoom"),r=t.data("map"),d=L.map(t.get(0),r);L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(d);var l=L.marker(r.center,{draggable:!0}).addTo(d),s=function(e){o.val(e.lat),a.val(e.lng),c.val(d.getZoom())};d.on("click",function(e){l.setLatLng(e.latlng),s(e.latlng)}),d.on("zoom",function(){s(l.getLatLng())}),l.on("drag",function(){s(l.getLatLng())}),n.length||(n=e('[data-depend-id="'+i.find(".ovic--address-field").data("address-field")+'"]'));var v={};n.autocomplete({source:function(i,t){var n=i.term;return n in v?void t(v[n]):void e.get("https://nominatim.openstreetmap.org/search",{format:"json",q:n},function(e){var i;i=e.length?e.map(function(e){return{value:e.display_name,label:e.display_name,lat:e.lat,lon:e.lon}},"json"):[{value:"no-data",label:"No Results."}],v[n]=i,t(i)})},select:function(e,i){if("no-data"===i.item.value)return!1;var t=L.latLng(i.item.lat,i.item.lon);d.panTo(t),l.setLatLng(t),s(t)},create:function(i,t){e(this).autocomplete("widget").addClass("ovic-map-ui-autocomplate")}});var f=function(){var e=L.latLng(o.val(),a.val());d.panTo(e),l.setLatLng(e)};o.on("change",f),a.on("change",f)}})},e.fn.ovic_field_link=function(){return this.each(function(){var t=e(this),n=t.find(".ovic--link"),a=t.find(".ovic--add"),c=t.find(".ovic--edit"),r=t.find(".ovic--remove"),d=t.find(".ovic--result"),l=o.helper.uid("ovic-wplink-textarea-");a.on("click",function(e){e.preventDefault(),i.wpLink.open(l)}),c.on("click",function(i){i.preventDefault(),a.trigger("click"),e("#wp-link-url").val(t.find(".ovic--url").val()),e("#wp-link-text").val(t.find(".ovic--text").val()),e("#wp-link-target").prop("checked","_blank"===t.find(".ovic--target").val())}),r.on("click",function(e){e.preventDefault(),t.find(".ovic--url").val("").trigger("change"),t.find(".ovic--text").val(""),t.find(".ovic--target").val(""),a.removeClass("hidden"),c.addClass("hidden"),r.addClass("hidden"),d.parent().addClass("hidden")}),n.attr("id",l).on("change",function(){var n=i.wpLink.getAttrs(),o=n.href,l=e("#wp-link-text").val(),s=n.target?n.target:"";t.find(".ovic--url").val(o).trigger("change"),t.find(".ovic--text").val(l),t.find(".ovic--target").val(s),d.html('{url:"'+o+'", text:"'+l+'", target:"'+s+'"}'),a.addClass("hidden"),c.removeClass("hidden"),r.removeClass("hidden"),d.parent().removeClass("hidden")})})},e.fn.ovic_field_image=function(){return this.each(function(){var i,t=e(this),n=t.find(".ovic-button"),o=t.find(".ovic-image-preview"),a=t.find(".ovic-image-remove"),c=t.find("input"),r=t.find("img");n.on("click",function(e){if(e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery){if(i)return void i.open();i=wp.media({library:{type:"image"}}),i.on("select",function(){var e=i.state().get("selection").first().attributes,t="undefined"!=typeof e.sizes&&"undefined"!=typeof e.sizes.thumbnail?e.sizes.thumbnail.url:e.url;o.removeClass("hidden"),r.attr("src",t),c.val(e.id).trigger("change")}),i.open()}}),a.on("click",function(e){e.preventDefault(),c.val("").trigger("change"),o.addClass("hidden")})})},e.fn.ovic_field_media=function(){return this.each(function(){var t,n=e(this),o=n.find(".ovic--button"),a=n.find(".ovic--remove"),c=o.data("library")&&o.data("library").split(",")||"",r=n.hasClass("ovic-assign-field-background")?n.closest(".ovic-field-background").find(".ovic--auto-attributes"):!1;o.on("click",function(e){if(e.preventDefault(),"undefined"!=typeof i.wp&&i.wp.media&&i.wp.media.gallery){if(t)return void t.open();t=i.wp.media({library:{type:c}}),t.on("select",function(){var e,i=t.state().get("selection").first().attributes,d=o.data("preview-size")||"thumbnail";c.length&&-1===c.indexOf(i.subtype)&&-1===c.indexOf(i.type)||(n.find(".ovic--id").val(i.id),n.find(".ovic--width").val(i.width),n.find(".ovic--height").val(i.height),n.find(".ovic--alt").val(i.alt),n.find(".ovic--title").val(i.title),n.find(".ovic--description").val(i.description),e="undefined"!=typeof i.sizes&&"undefined"!=typeof i.sizes.thumbnail&&"thumbnail"===d?i.sizes.thumbnail.url:"undefined"!=typeof i.sizes&&"undefined"!=typeof i.sizes.full?i.sizes.full.url:"image"===i.type?i.url:i.icon,r&&r.removeClass("ovic--attributes-hidden"),a.removeClass("hidden"),n.find(".ovic--preview").removeClass("hidden"),n.find(".ovic--src").attr("src",e),n.find(".ovic--thumbnail").val(e),n.find(".ovic--url").val(i.url).trigger("change"))}),t.open()}}),a.on("click",function(e){e.preventDefault(),r&&r.addClass("ovic--attributes-hidden"),a.addClass("hidden"),n.find("input").val(""),n.find(".ovic--preview").addClass("hidden"),n.find(".ovic--url").trigger("change")})})},e.fn.ovic_field_repeater=function(){return this.each(function(){var i=e(this),t=i.children(".ovic-fieldset"),n=t.length?t:i,a=n.children(".ovic-repeater-wrapper"),c=n.children(".ovic-repeater-hidden"),r=n.children(".ovic-repeater-max"),d=n.children(".ovic-repeater-min"),l=a.data("field-id"),s=parseInt(a.data("max")),v=parseInt(a.data("min"));a.children(".ovic-repeater-item").children(".ovic-repeater-content").ovic_reload_script(),a.sortable({axis:"y",handle:".ovic-repeater-sort",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,i){o.helper.name_nested_replace(a.children(".ovic-repeater-item"),l),a.ovic_customizer_refresh(),i.item.ovic_reload_script_retry()}}),n.children(".ovic-repeater-add").on("click",function(e){e.preventDefault();var i=a.children(".ovic-repeater-item").length;if(d.hide(),s&&i+1>s)return void r.show();var t=c.ovic_clone(!0);t.removeClass("ovic-repeater-hidden"),t.find(':input[name!="_pseudo"]').each(function(){this.name=this.name.replace("___","").replace(l+"[0]",l+"["+i+"]")}),a.append(t),t.children(".ovic-repeater-content").ovic_reload_script(),a.ovic_customizer_refresh(),a.ovic_customizer_listen({closest:!0})});var f=function(i){i.preventDefault();var t=a.children(".ovic-repeater-item").length;if(d.hide(),s&&t+1>s)return void r.show();var n=e(this),c=n.parent().parent().parent(),v=c.children(".ovic-repeater-content").ovic_clone(),f=c.children(".ovic-repeater-helper").ovic_clone(!0),h=e('<div class="ovic-repeater-item" />');h.append(v),h.append(f),a.children().eq(c.index()).after(h),h.children(".ovic-repeater-content").ovic_reload_script(),o.helper.name_nested_replace(a.children(".ovic-repeater-item"),l),a.ovic_customizer_refresh(),a.ovic_customizer_listen({closest:!0})};a.children(".ovic-repeater-item").children(".ovic-repeater-helper").on("click",".ovic-repeater-clone",f),n.children(".ovic-repeater-hidden").children(".ovic-repeater-helper").on("click",".ovic-repeater-clone",f);var h=function(i){i.preventDefault();var t=a.children(".ovic-repeater-item").length;return r.hide(),d.hide(),v&&v>t-1?void d.show():(e(this).closest(".ovic-repeater-item").remove(),o.helper.name_nested_replace(a.children(".ovic-repeater-item"),l),void a.ovic_customizer_refresh())};a.children(".ovic-repeater-item").children(".ovic-repeater-helper").on("click",".ovic-repeater-remove",h),n.children(".ovic-repeater-hidden").children(".ovic-repeater-helper").on("click",".ovic-repeater-remove",h)})},e.fn.ovic_field_slider=function(){return this.each(function(){var i=e(this),t=i.find("input"),n=i.find(".ovic-slider-ui"),o=t.data(),a=t.val()||0;n.slider({range:"min",value:parseInt(a),min:parseInt(o.min),max:parseInt(o.max),step:parseInt(o.step),slide:function(e,i){t.val(i.value).trigger("change")}}),t.on("keyup",function(){n.slider("value",parseInt(t.val()))})})},e.fn.ovic_field_sortable=function(){return this.each(function(){var i=e(this).find(".ovic--sortable");i.sortable({axis:"y",helper:"original",cursor:"move",placeholder:"widget-placeholder",update:function(e,t){i.ovic_customizer_refresh()}}),i.find(".ovic--sortable-content").ovic_reload_script()})},e.fn.ovic_field_sorter=function(){return this.each(function(){var i=e(this),t=i.find(".ovic-enabled"),n=i.find(".ovic-disabled"),o=n.length?n:!1;t.sortable({connectWith:o,placeholder:"ui-sortable-placeholder",update:function(e,t){var n=t.item.find("input");t.item.parent().hasClass("ovic-enabled")?n.attr("name",n.attr("name").replace("disabled","enabled")):n.attr("name",n.attr("name").replace("enabled","disabled")),i.ovic_customizer_refresh()}}),o&&o.sortable({connectWith:t,placeholder:"ui-sortable-placeholder",update:function(e,t){i.ovic_customizer_refresh()}})})},e.fn.ovic_field_spinner=function(){return this.each(function(){var i=e(this),t=i.find("input"),n=i.find(".ui-spinner-button"),o=t.data();n.length&&n.remove(),t.spinner({min:o.min||0,max:o.max||100,step:o.step||1,create:function(e,i){o.unit&&t.after('<span class="ui-button ovic--unit">'+o.unit+"</span>")},spin:function(e,i){t.val(i.value).trigger("change")}})})},e.fn.ovic_field_switcher=function(){return this.each(function(){var i=e(this).find(".ovic--switcher");i.on("click",function(){var e=0,t=i.find("input");i.hasClass("ovic--active")?i.removeClass("ovic--active"):(e=1,i.addClass("ovic--active")),t.val(e).trigger("change")})})},e.fn.ovic_field_tabbed=function(){return this.each(function(){var i=e(this),t=i.find(".ovic-tabbed-nav a"),n=i.find(".ovic-tabbed-section");n.eq(0).ovic_reload_script(),t.on("click",function(i){i.preventDefault();var t=e(this),o=t.index(),a=n.eq(o);t.addClass("ovic-tabbed-active").siblings().removeClass("ovic-tabbed-active"),a.ovic_reload_script(),a.removeClass("hidden").siblings().addClass("hidden")})})},e.fn.ovic_field_typography=function(){return this.each(function(){var i=this,t=e(this),n=[],a=ovic_typography_json.webfonts,c=ovic_typography_json.googlestyles,r=ovic_typography_json.defaultstyles;i.sanitize_subset=function(e){return e=e.replace("-ext"," Extended"),e=e.charAt(0).toUpperCase()+e.slice(1)},i.sanitize_style=function(e){return c[e]?c[e]:e},i.load_google_font=function(e,i,t){e&&"object"==typeof WebFont&&(i=i?i.replace("normal",""):"",t=t?t.replace("normal",""):"",(i||t)&&(e=e+":"+i+t),-1===n.indexOf(e)&&WebFont.load({google:{families:[e]}}),n.push(e))},i.append_select_options=function(t,n,o,a,c){t.find("option").not(":first").remove();var r="";e.each(n,function(e,t){var n,d=t;n=c?o&&-1!==o.indexOf(t)?" selected":"":o&&o===t?" selected":"","subset"===a?d=i.sanitize_subset(t):"style"===a&&(d=i.sanitize_style(t)),r+='<option value="'+t+'"'+n+">"+d+"</option>"}),t.append(r).trigger("ovic.change").trigger("chosen:updated")},i.init=function(){var n=[],c=t.find(".ovic--typography"),d=t.find(".ovic--type"),l=t.find(".ovic--block-font-style"),s=c.data("unit"),v=c.data("line-height-unit"),f=c.data("exclude")?c.data("exclude").split(","):[];if(t.find(".ovic--chosen").length){var h=t.find("select");h.each(function(){var i=e(this),t=i.parent().find(".chosen-container");t.length&&t.remove(),i.chosen({allow_single_deselect:!0,disable_search_threshold:15,width:"100%"})})}var p=t.find(".ovic--font-family"),u=p.val();p.find("option").not(":first-child").remove();var g="";e.each(a,function(i,t){f&&-1!==f.indexOf(i)||(g+='<optgroup label="'+t.label+'">',e.each(t.fonts,function(e,t){t="object"==typeof t?e:t;var n=t===u?" selected":"";g+='<option value="'+t+'" data-type="'+i+'"'+n+">"+t+"</option>"}),g+="</optgroup>")}),p.append(g).trigger("chosen:updated");var m=t.find(".ovic--block-font-style");if(m.length){var _=t.find(".ovic--font-style-select"),b=_.val()?_.val().replace(/normal/g,""):"";_.on("change ovic.change",function(e){var i=_.val();!i&&n&&-1===n.indexOf("normal")&&(i=n[0]);var o=i&&"italic"!==i&&"normal"===i?"normal":"",a=i&&"italic"!==i&&"normal"!==i?i.replace("italic",""):o,c=i&&"italic"===i.substr(-6)?"italic":"";t.find(".ovic--font-weight").val(a),t.find(".ovic--font-style").val(c)});var y=t.find(".ovic--block-extra-styles");if(y.length)var w=t.find(".ovic--extra-styles"),C=w.val()}var k=t.find(".ovic--block-subset");if(k.length)var x=t.find(".ovic--subset"),z=x.val(),O=x.data("multiple")||!1;var D=t.find(".ovic--block-backup-font-family");p.on("change ovic.change",function(e){k.length&&k.addClass("hidden"),y.length&&y.addClass("hidden"),D.length&&D.addClass("hidden");var t=p.find(":selected"),o=t.val(),c=t.data("type");if(c&&o){if("google"!==c&&"custom"!==c||!D.length||D.removeClass("hidden"),m.length){var s=r;"google"===c&&a[c].fonts[o][0]?s=a[c].fonts[o][0]:"custom"===c&&a[c].fonts[o]&&(s=a[c].fonts[o]),n=s;var v=-1!==s.indexOf("normal")?"normal":s[0],f=b&&-1!==s.indexOf(b)?b:v;i.append_select_options(_,s,f,"style"),b=!1,m.removeClass("hidden"),"google"===c&&y.length&&s.length>1&&(i.append_select_options(w,s,C,"style",!0),C=!1,y.removeClass("hidden"))}if("google"===c&&k.length&&a[c].fonts[o][1]){var h=a[c].fonts[o][1],u=h.length<2&&"latin"!==h[0]?h[0]:"",g=z&&-1!==h.indexOf(z)?z:u;g=O&&z?z:g,i.append_select_options(x,h,g,"subset",O),z=!1,k.removeClass("hidden")}}else l.find(":input").val(""),k.length&&(x.find("option").not(":first-child").remove(),x.trigger("chosen:updated")),m.length&&(_.find("option").not(":first-child").remove(),_.trigger("chosen:updated"));d.val(c)}).trigger("ovic.change");var I=t.find(".ovic--block-preview");if(I.length){var j=t.find(".ovic--preview");t.on("change",o.helper.debounce(function(e){I.removeClass("hidden");var n=p.val(),o=t.find(".ovic--font-weight").val(),a=t.find(".ovic--font-style").val(),c=t.find(".ovic--font-size").val(),r=t.find(".ovic--font-variant").val(),d=t.find(".ovic--line-height").val(),l=t.find(".ovic--text-align").val(),f=t.find(".ovic--text-transform").val(),h=t.find(".ovic--text-decoration").val(),u=t.find(".ovic--color").val(),g=t.find(".ovic--word-spacing").val(),m=t.find(".ovic--letter-spacing").val(),_=t.find(".ovic--custom-style").val(),b=t.find(".ovic--type").val();"google"===b&&i.load_google_font(n,o,a);var y={};n&&(y.fontFamily=n),o&&(y.fontWeight=o),a&&(y.fontStyle=a),r&&(y.fontVariant=r),c&&(y.fontSize=c+s),d&&(y.lineHeight=d+v),m&&(y.letterSpacing=m+s),g&&(y.wordSpacing=g+s),l&&(y.textAlign=l),f&&(y.textTransform=f),h&&(y.textDecoration=h),u&&(y.color=u),j.removeAttr("style"),_&&j.attr("style",_),j.css(y)},100)),I.on("click",function(){j.toggleClass("ovic--black-background");var e=I.find(".ovic--toggle");e.hasClass("fa-toggle-off")?e.removeClass("fa-toggle-off").addClass("fa-toggle-on"):e.removeClass("fa-toggle-on").addClass("fa-toggle-off")}),I.hasClass("hidden")||t.trigger("change")}},i.init()})},e.fn.ovic_field_upload=function(){return this.each(function(){var t,n=e(this),o=n.find("input"),a=n.find(".ovic--button"),c=n.find(".ovic--remove"),r=n.find(".ovic--preview"),d=n.find(".ovic--src"),l=a.data("library")&&a.data("library").split(",")||"";a.on("click",function(e){if(e.preventDefault(),"undefined"!=typeof i.wp&&i.wp.media&&i.wp.media.gallery){if(t)return void t.open();t=i.wp.media({library:{type:l}}),t.on("select",function(){var e=t.state().get("selection").first().attributes;l.length&&-1===l.indexOf(e.subtype)&&-1===l.indexOf(e.type)||o.val(e.url).trigger("change")}),t.open()}}),c.on("click",function(e){e.preventDefault(),o.val("").trigger("change")}),o.on("change",function(i){var t=o.val();t?c.removeClass("hidden"):c.addClass("hidden"),r.length&&(-1!==e.inArray(t.split(".").pop().toLowerCase(),["jpg","jpeg","gif","png","svg","webp"])?(r.removeClass("hidden"),d.attr("src",t)):r.addClass("hidden"))})})},e.fn.ovic_field_wp_editor=function(){return this.each(function(){if("undefined"!=typeof i.wp.editor&&"undefined"!=typeof i.tinyMCEPreInit&&"undefined"!=typeof i.tinyMCEPreInit.mceInit.ovic_wp_editor){var t=e(this),n=t.find(".ovic-wp-editor"),a=t.find("textarea"),c=t.find(".wp-editor-wrap").length||t.find(".mce-container").length;c&&(n.empty(),n.append(a),a.css("display",""));var r=o.helper.uid("ovic-editor-");a.attr("id",r);var d={tinymce:i.tinyMCEPreInit.mceInit.ovic_wp_editor,quicktags:i.tinyMCEPreInit.qtInit.ovic_wp_editor},l=n.data("editor-settings"),s=wp.oldEditor?wp.oldEditor:wp.editor;s&&s.hasOwnProperty("autop")&&(wp.editor.autop=s.autop,wp.editor.removep=s.removep,wp.editor.initialize=s.initialize);var v=function(e){e.on("change keyup",function(){var i=l.wpautop?e.getContent():wp.editor.removep(e.getContent());a.val(i).trigger("change")})};d.tinymce=e.extend({},d.tinymce,{selector:"#"+r,setup:v}),l.tinymce===!1&&(d.tinymce=!1,n.addClass("ovic-no-tinymce")),l.quicktags===!1&&(d.quicktags=!1,n.addClass("ovic-no-quicktags"));var f=setInterval(function(){t.is(":visible")&&(i.wp.editor.initialize(r,d),clearInterval(f))});if(l.media_buttons&&i.ovic_media_buttons){var h=n.find(".wp-media-buttons");if(h.length)h.find(".ovic-shortcode-button").data("editor-id",r);else{var p=e(i.ovic_media_buttons);p.find(".ovic-shortcode-button").data("editor-id",r),n.prepend(p)}}}})},e.fn.ovic_confirm=function(){return this.each(function(){e(this).on("click",function(t){var n=e(this).data("confirm")||i.ovic_vars.i18n.confirm,a=confirm(n);return a?(o.vars.is_confirm=!0,void(o.vars.form_modified=!1)):(t.preventDefault(),!1)})})},e.fn.serializeObject=function(){var i={};return e.each(this.serializeArray(),function(t,o){
    var a=o.name,c=o.value;i[a]=i[a]===n?c:e.isArray(i[a])?i[a].concat(c):[i[a],c]}),i},e.fn.ovic_save=function(){return this.each(function(){var t,n=e(this),a=e(".ovic-save"),c=e(".ovic-options"),r=!1;n.on("click",function(d){if(!r){var l=n.data("save"),s=n.val();a.attr("value",l),n.hasClass("ovic-save-ajax")?(d.preventDefault(),c.addClass("ovic-saving"),a.prop("disabled",!0),i.wp.ajax.post("ovic_"+c.data("unique")+"_ajax_save",{data:e("#ovic-form").serializeJSONOVIC()}).done(function(i){if(e(".ovic-error").remove(),Object.keys(i.errors).length){var n='<i class="ovic-label-error ovic-error">!</i>';e.each(i.errors,function(i,t){var o=e('[data-depend-id="'+i+'"]'),a=e("#ovic-tab-link-"+(o.closest(".ovic-section").index()+1)),c=a.closest(".ovic-tab-depth-0");o.closest(".ovic-fieldset").append('<p class="ovic-text-error ovic-error">'+t+"</p>"),a.find(".ovic-error").length||a.append(n),c.find(".ovic-arrow .ovic-error").length||c.find(".ovic-arrow").append(n)})}c.removeClass("ovic-saving"),a.prop("disabled",!1).attr("value",s),r=!1,o.vars.form_modified=!1,o.vars.$form_warning.hide(),clearTimeout(t);var d=e(".ovic-form-success");d.empty().append(i.notice).fadeIn("fast",function(){t=setTimeout(function(){d.fadeOut("fast")},1e3)})}).fail(function(e){alert(e.error)})):o.vars.form_modified=!1}r=!0})})},e.fn.ovic_options=function(){return this.each(function(){var a=e(this),c=a.find(".ovic-content"),r=a.find(".ovic-form-success"),d=a.find(".ovic-form-warning"),l=a.find(".ovic-header .ovic-save");o.vars.$form_warning=d,d.length&&(i.onbeforeunload=function(){return o.vars.form_modified&&o.vars.is_confirm===!1?!0:n},c.on("change keypress",":input",function(){o.vars.form_modified||(r.hide(),d.fadeIn("fast"),o.vars.form_modified=!0)})),r.hasClass("ovic-form-show")&&setTimeout(function(){r.fadeOut("fast")},1e3),e(t).keydown(function(e){return(e.ctrlKey||e.metaKey)&&83===e.which?(l.trigger("click"),e.preventDefault(),!1):void 0})})},e.fn.ovic_taxonomy=function(){return this.each(function(){var i=e(this),t=i.parents("form");if("addtag"===t.attr("id")){var n=t.find("#submit"),o=i.find("> .ovic-field").ovic_clone();n.on("click",function(){t.find(".form-required").hasClass("form-invalid")||(i.data("inited",!1),i.empty(),i.html(o),o=o.ovic_clone(),i.ovic_reload_script())})}})},e.fn.ovic_shortcode=function(){var a=this;return a.shortcode_parse=function(i,t){var n="";return e.each(i,function(i,o){t=t?t:i,n+="["+t,e.each(o,function(e,i){"content"===e?(n+="]",n+=i,n+="[/"+t):n+=a.shortcode_tags(e,i)}),n+="]"}),n},a.shortcode_tags=function(i,t){var n="";return""!==t&&("object"!=typeof t||e.isArray(t)?n+=" "+i.replace("-","_")+'="'+t.toString()+'"':e.each(t,function(e,i){switch(e){case"background-image":i=i.url?i.url:""}""!==i&&(n+=" "+e.replace("-","_")+'="'+i.toString()+'"')})),n},a.insertAtChars=function(e,i){var t="undefined"!=typeof e[0].name?e[0]:e;return t.value.length&&"undefined"!=typeof t.selectionStart?(t.focus(),t.value.substring(0,t.selectionStart)+i+t.value.substring(t.selectionEnd,t.value.length)):(t.focus(),i)},a.send_to_editor=function(i,t){var n;if("undefined"!=typeof tinymce&&(n=tinymce.get(t)),n&&!n.isHidden())n.execCommand("mceInsertContent",!1,i);else{var o=e("#"+t);o.val(a.insertAtChars(o,i)).trigger("change")}},this.each(function(){var c,r,d,l,s,v,f,h,p,u=e(this),g=u.find(".ovic-modal-load"),m=(u.find(".ovic-modal-content"),u.find(".ovic-modal-insert")),_=u.find(".ovic-modal-loading"),b=u.find("select"),y=u.data("modal-id"),w=u.data("nonce");e(t).on("click",'.ovic-shortcode-button[data-modal-id="'+y+'"]',function(i){i.preventDefault(),p=e(this),c=p.data("editor-id")||!1,r=p.data("target-id")||!1,d=p.data("gutenberg-id")||!1,u.show(),u.hasClass("ovic-shortcode-single")&&s===n&&b.trigger("change")}),e(t).on("ovic_button_tinymce_"+y,function(i,t,o){p=e(t.$el),c=o,d=!1,r=!1,u.show(),u.hasClass("ovic-shortcode-single")&&s===n&&b.trigger("change")}),b.on("change",function(){var t=e(this),n=t.find(":selected");l=t.val(),s=n.data("shortcode"),v=n.data("view")||"normal",f=n.data("group")||s,g.empty(),l?(_.show(),i.wp.ajax.post("ovic-get-shortcode-"+y,{shortcode_key:l,nonce:w}).done(function(i){_.hide();var t=e(i.content).appendTo(g);m.parent().removeClass("hidden"),h=t.find(".ovic--repeat-shortcode").ovic_clone(),t.ovic_reload_script(),t.find(".ovic-fields").ovic_reload_script()})):m.parent().addClass("hidden")}),m.on("click",function(t){if(t.preventDefault(),!m.prop("disabled")&&!m.attr("disabled")){var n="",o=u.find(".ovic-field:not(.hidden)").find(":input:not(.ignore)").serializeObjectOVIC();switch(v){case"contents":var l=s?o[s]:o;e.each(l,function(e,i){var t=s?s:e;n+="["+t+"]"+i+"[/"+t+"]"});break;case"group":n+="["+s,e.each(o[s],function(e,i){n+=a.shortcode_tags(e,i)}),n+="]",n+=a.shortcode_parse(o[f],f),n+="[/"+s+"]";break;case"repeater":n+=a.shortcode_parse(o[f],f);break;default:n+=a.shortcode_parse(o)}if(n=""===n?"["+s+"]":n,d){var h=i.ovic_gutenberg_props.attributes.hasOwnProperty("shortcode")?i.ovic_gutenberg_props.attributes.shortcode:"";i.ovic_gutenberg_props.setAttributes({shortcode:h+n})}else if(c)a.send_to_editor(n,c);else{var g=r?e(r):p.parent().parent().find("textarea");g.val(a.insertAtChars(g,n)).trigger("change")}u.hide()}}),u.on("click",".ovic--repeat-button",function(e){e.preventDefault();var i=u.find(".ovic--repeatable"),t=h.ovic_clone(),n=t.find(".ovic-repeat-remove");t.appendTo(i);t.find(".ovic-fields").ovic_reload_script(),o.helper.name_nested_replace(u.find(".ovic--repeat-shortcode"),f),n.on("click",function(){t.remove(),o.helper.name_nested_replace(u.find(".ovic--repeat-shortcode"),f)})}),u.on("click",".ovic-modal-close, .ovic-modal-overlay",function(){u.hide()})})},e.fn.ovic_field_select_preview=function(){return this.each(function(){var i=e(this),t=i.find(":selected").data("preview"),n=i.find(":selected").data("url"),o=i.find(".image-preview img"),a=i.find(".image-preview a"),c=i.find(".ovic_select_preview");o.attr("src",t),a.attr("href",n),c.on("change",function(){t=i.find(":selected").data("preview"),n=i.find(":selected").data("url"),o.attr("src",t),a.attr("href",n)})})},"function"==typeof Color&&(Color.prototype.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var e=parseInt(this._color,10).toString(16);if(this.error)return"";if(e.length<6)for(var i=6-e.length-1;i>=0;i--)e="0"+e;return"#"+e}),o.funcs.parse_color=function(e){var i=e.replace(/\s+/g,""),t=-1!==i.indexOf("rgba")?parseFloat(100*i.replace(/^.*,(.+)\)/,"$1")):100,n=100>t?!0:!1;return{value:i,transparent:t,rgba:n}},e.fn.ovic_color=function(){return this.each(function(){var t,n=e(this),a=o.funcs.parse_color(n.val()),c=i.ovic_vars.color_palette.length?i.ovic_vars.color_palette:!0;n.hasClass("wp-color-picker")&&n.closest(".wp-picker-container").after(n).remove(),n.wpColorPicker({palettes:c,change:function(e,i){var o=i.color.toString();t.removeClass("ovic--transparent-active"),t.find(".ovic--transparent-offset").css("background-color",o),n.val(o).trigger("change")},create:function(){t=n.closest(".wp-picker-container");var i=n.data("a8cIris"),c=e('<div class="ovic--transparent-wrap"><div class="ovic--transparent-slider"></div><div class="ovic--transparent-offset"></div><div class="ovic--transparent-text"></div><div class="ovic--transparent-button">transparent <i class="fas fa-toggle-off"></i></div></div>').appendTo(t.find(".wp-picker-holder")),r=c.find(".ovic--transparent-slider"),d=c.find(".ovic--transparent-text"),l=c.find(".ovic--transparent-offset"),s=c.find(".ovic--transparent-button");"transparent"===n.val()&&t.addClass("ovic--transparent-active"),s.on("click",function(){"transparent"!==n.val()?(n.val("transparent").trigger("change").removeClass("iris-error"),t.addClass("ovic--transparent-active")):(n.val(i._color.toString()).trigger("change"),t.removeClass("ovic--transparent-active"))}),r.slider({value:a.transparent,step:1,min:0,max:100,slide:function(e,t){var o=parseFloat(t.value/100);i._color._alpha=o,n.wpColorPicker("color",i._color.toString()),d.text(1===o||0===o?"":o)},create:function(){var e=parseFloat(a.transparent/100),c=1>e?e:"";d.text(c),l.css("background-color",a.value),t.on("click",".wp-picker-clear",function(){i._color._alpha=1,d.text(""),r.slider("option","value",100),t.removeClass("ovic--transparent-active"),n.trigger("change")}),t.on("click",".wp-picker-default",function(){var e=o.funcs.parse_color(n.data("default-color")),t=parseFloat(e.transparent/100),a=1>t?t:"";i._color._alpha=t,d.text(a),r.slider("option","value",e.transparent)})}})}})})},e.fn.ovic_number=function(){return this.each(function(){e(this).on("keypress",function(e){return 0!==e.keyCode&&8!==e.keyCode&&45!==e.keyCode&&46!==e.keyCode&&(e.keyCode<48||e.keyCode>57)?!1:void 0})})},e.fn.ovic_chosen=function(){return this.each(function(){var t=e(this),o=t.parent().find(".chosen-container"),a=t.hasClass("ovic-chosen-sortable")||!1,c=t.hasClass("ovic-chosen-ajax")||!1,r=t.attr("multiple")||!1,d=r?"100%":"auto",l=e.extend({allow_single_deselect:!0,disable_search_threshold:10,width:d,no_results_text:i.ovic_vars.i18n.no_results_text},t.data("chosen-settings"));if(o.length&&o.remove(),c){var s=e.extend({data:{type:"post",nonce:""},allow_single_deselect:!0,disable_search_threshold:-1,width:"100%",min_length:3,type_delay:500,typing_text:i.ovic_vars.i18n.typing_text,searching_text:i.ovic_vars.i18n.searching_text,no_results_text:i.ovic_vars.i18n.no_results_text},t.data("chosen-settings"));t.OVICAjaxChosen(s)}else t.chosen(l);if(r){var v=t.parent().find(".ovic-hide-select"),f=v.val()||[];t.on("change",function(e,t){t&&t.selected?v.append('<option value="'+t.selected+'" selected="selected">'+t.selected+"</option>"):t&&t.deselected&&v.find('option[value="'+t.deselected+'"]').remove(),i.wp.customize!==n&&0===v.children().length&&v.data("customize-setting-link")&&i.wp.customize.control(v.data("customize-setting-link")).setting.set(""),v.trigger("change")}),t.OVICChosenOrder(f,!0)}if(a){var h=t.parent().find(".chosen-container"),p=h.find(".chosen-choices");p.bind("mousedown",function(i){e(i.target).is("span")&&i.stopPropagation()}),p.sortable({items:"li:not(.search-field)",helper:"orginal",cursor:"move",placeholder:"search-choice-placeholder",start:function(e,i){i.placeholder.width(i.item.innerWidth()),i.placeholder.height(i.item.innerHeight())},update:function(i,n){var o="",a=t.data("chosen"),c=t.parent().find(".ovic-hide-select");p.find(".search-choice-close").each(function(){var i=e(this).data("option-array-index");e.each(a.results_data,function(e,t){t.array_index===i&&(o+='<option value="'+t.value+'" selected>'+t.value+"</option>")})}),c.children().remove(),c.append(o),c.trigger("change")}})}})},e.fn.ovic_checkbox=function(){return this.each(function(){var i=e(this),t=i.find(".ovic--input"),n=i.find(".ovic--checkbox");n.on("click",function(){t.val(Number(n.prop("checked"))).trigger("change")})})},e.fn.ovic_siblings=function(){return this.each(function(){var i=e(this),t=i.find(".ovic--sibling"),n=i.data("multiple")||!1;t.on("click",function(){var t=e(this);n?t.hasClass("ovic--active")?(t.removeClass("ovic--active"),t.find("input").prop("checked",!1).trigger("change")):(t.addClass("ovic--active"),t.find("input").prop("checked",!0).trigger("change")):(i.find("input").prop("checked",!1),t.find("input").prop("checked",!0).trigger("change"),t.addClass("ovic--active").siblings().removeClass("ovic--active"))})})},e.fn.ovic_help=function(){return this.each(function(){var i,t,a=e(this);a.on({mouseenter:function(){i=e('<div class="ovic-tooltip"></div>').html(a.find(".ovic-help-text").html()).appendTo("body"),t=o.vars.is_rtl?a.offset().left+24:a.offset().left-i.outerWidth(),i.css({top:a.offset().top-(i.outerHeight()/2-14),left:t})},mouseleave:function(){i!==n&&i.remove()}})})},e.fn.ovic_customizer_refresh=function(){return this.each(function(){var o=e(this),a=o.closest(".ovic-customize-complex");if(a.length){var c=a.data("unique-id");if(c===n)return;var r=a.find(":input"),d=a.data("option-id"),l=r.serializeObjectOVIC(),s=!e.isEmptyObject(l)&&l[c]&&l[c][d]?l[c][d]:"",v=i.wp.customize.control(c+"["+d+"]");v.setting._value=null,v.setting.set(s)}else o.find(":input").first().trigger("change");e(t).trigger("ovic-customizer-refresh",o)})},e.fn.ovic_customizer_listen=function(t){var a=e.extend({closest:!1},t);return this.each(function(){if(i.wp.customize!==n){var t=a.closest?e(this).closest(".ovic-customize-complex"):e(this),c=t.find(":input"),r=t.data("unique-id"),d=t.data("option-id");r!==n&&c.on("change keyup",o.helper.debounce(function(){var n=t.find(":input").serializeObjectOVIC(),o=!e.isEmptyObject(n)&&n[r]&&n[r][d]?n[r][d]:"";i.wp.customize.control(r+"["+d+"]").setting.set(o)},250))}})},e(t).on("expanded",".control-section-ovic",function(){var i=e(this);if(i.hasClass("open")&&!i.data("inited")){var t=i.find(".ovic-customize-field"),n=i.find(".ovic-customize-complex");t.length&&(i.ovic_dependency(),t.ovic_reload_script({dependency:!1}),n.ovic_customizer_listen()),i.data("inited",!0)}}),e(t).on("click","#ovic-form .ovic-save-callback",function(){var t=e(this),n=e(this).closest(".ovic-options"),a=e(this).closest("#ovic-form");return n.addClass("ovic-saving"),e.post(t.attr("href"),{options:a.serializeJSONOVIC()},function(e){o.vars.form_modified=!1,o.vars.$form_warning.hide(),e.data&&(i.location.href=e.data),n.removeClass("ovic-saving")}),!1}),o.vars.$window.on("resize ovic.resize",o.helper.debounce(function(t){var n=navigator.userAgent.indexOf("AppleWebKit/")>-1?o.vars.$window.width():i.innerWidth;782>=n&&!o.vars.onloaded&&(e(".ovic-section").ovic_reload_script(),o.vars.onloaded=!0)},200)).trigger("ovic.resize"),e.fn.ovic_widgets=function(){this.length&&(e(t).on("widget-added widget-updated",function(e,i){i.find(".ovic-fields").ovic_reload_script()}),e(".widgets-sortables, .control-section-sidebar").on("sortstop",function(e,i){i.item.find(".ovic-fields").ovic_reload_script_retry()}),e(t).on("click",".widget-top",function(i){e(this).parent().find(".ovic-fields").ovic_reload_script()}))},e.fn.ovic_nav_menu=function(){return this.each(function(){var i=e(this);i.on("click","a.item-edit",function(){e(this).closest("li.menu-item").find(".ovic-fields").ovic_reload_script()}),i.on("sortstop",function(e,i){i.item.find(".ovic-fields").ovic_reload_script_retry()})})},e.fn.ovic_reload_script_retry=function(){return this.each(function(){var i=e(this);i.data("inited")&&i.children(".ovic-field-wp_editor").ovic_field_wp_editor()})},e.fn.ovic_reload_script=function(i){var n=e.extend({dependency:!0,inited:!0},i);return this.each(function(){var i=e(this);i.data("inited")||(i.children(".ovic-field-accordion").ovic_field_accordion(),i.children(".ovic-field-backup").ovic_field_backup(),i.children(".ovic-field-background").ovic_field_background(),i.children(".ovic-field-code_editor").ovic_field_code_editor(),i.children(".ovic-field-date").ovic_field_date(),i.children(".ovic-field-fieldset").ovic_field_fieldset(),i.children(".ovic-field-gallery").ovic_field_gallery(),i.children(".ovic-field-group").ovic_field_group(),i.children(".ovic-field-icon").ovic_field_icon(),i.children(".ovic-field-link").ovic_field_link(),i.children(".ovic-field-image").ovic_field_image(),i.children(".ovic-field-media").ovic_field_media(),i.children(".ovic-field-map").ovic_field_map(),i.children(".ovic-field-repeater").ovic_field_repeater(),i.children(".ovic-field-slider").ovic_field_slider(),i.children(".ovic-field-sortable").ovic_field_sortable(),i.children(".ovic-field-sorter").ovic_field_sorter(),i.children(".ovic-field-spinner").ovic_field_spinner(),i.children(".ovic-field-switcher").ovic_field_switcher(),i.children(".ovic-field-tabbed").ovic_field_tabbed(),i.children(".ovic-field-typography").ovic_field_typography(),i.children(".ovic-field-upload").ovic_field_upload(),i.children(".ovic-field-wp_editor").ovic_field_wp_editor(),i.children(".ovic-field-select_preview").ovic_field_select_preview(),i.children(".ovic-field-border").find(".ovic-color").ovic_color(),i.children(".ovic-field-background").find(".ovic-color").ovic_color(),i.children(".ovic-field-color").find(".ovic-color").ovic_color(),i.children(".ovic-field-color_group").find(".ovic-color").ovic_color(),i.children(".ovic-field-link_color").find(".ovic-color").ovic_color(),i.children(".ovic-field-typography").find(".ovic-color").ovic_color(),i.children(".ovic-field-dimensions").find(".ovic-number").ovic_number(),i.children(".ovic-field-slider").find(".ovic-number").ovic_number(),i.children(".ovic-field-spacing").find(".ovic-number").ovic_number(),i.children(".ovic-field-spinner").find(".ovic-number").ovic_number(),i.children(".ovic-field-typography").find(".ovic-number").ovic_number(),i.children(".ovic-field-select").find(".ovic-chosen").ovic_chosen(),i.children(".ovic-field-checkbox").find(".ovic-checkbox").ovic_checkbox(),i.children(".ovic-field-button_set").find(".ovic-siblings").ovic_siblings(),i.children(".ovic-field-image_select").find(".ovic-siblings").ovic_siblings(),i.children(".ovic-field-palette").find(".ovic-siblings").ovic_siblings(),i.children(".ovic-field-backup_widgets").find(".ovic-siblings").ovic_siblings(),i.find(".ovic-field").find(".ovic-help").ovic_help(),n.dependency&&i.ovic_dependency(),n.inited&&i.data("inited",!0),e(t).trigger("ovic-reload-script",i))})},e(t).ready(function(){function t(e){var i=e.$el.find(".ovic-fields");i.length&&i.ovic_reload_script()}e(".ovic-save").ovic_save(),e(".ovic-options").ovic_options(),e(".ovic-sticky-header").ovic_sticky(),e(".ovic-nav-options").ovic_nav_options(),e(".ovic-nav-metabox").ovic_nav_metabox(),e(".ovic-taxonomy").ovic_taxonomy(),e(".ovic-page-templates").ovic_page_templates(),e(".ovic-post-formats").ovic_post_formats(),e(".ovic-shortcode").ovic_shortcode(),e(".ovic-search").ovic_search(),e(".ovic-confirm").ovic_confirm(),e(".ovic-expand-all").ovic_expand_all(),e(".ovic-onload").ovic_reload_script(),e(".widgets-php,#widgets-right").ovic_widgets(),e("#menu-to-edit").ovic_nav_menu(),i.ovic_vars.is_preview&&elementor.hooks.addAction("panel/open_editor/widget",function(e,i,n){var o=i.get("widgetType");elementor.hooks.addAction("panel/widgets/"+o+"/controls/wp_widget/loaded",t),elementor.hooks.addAction("panel/widgets/wp-widget-"+o+"/controls/wp_widget/loaded",t)})})}(jQuery,window,document);